{% load static %}

<div class="p-3">
  <div class="widget-frame rounded-4 overflow-hidden">
    {% if special.image %}
      <img src="{{ special.image.url }}" alt="{{ special.title }}" class="w-100 object-cover" style="max-height:240px;">
    {% endif %}
    <div class="p-3 bg-body rounded-bottom-4">
      <h3 class="h5 mb-1">{{ special.title }}</h3>
      <p class="mb-2 text-secondary">{{ special.description|linebreaks }}</p>
      <div class="d-flex flex-wrap gap-2">
        {% if special.order_url %}<a href="{{ special.order_url }}" target="_blank" class="btn btn-teal">Order</a>{% endif %}
        {% if special.mobile_order_url %}<a href="{{ special.mobile_order_url }}" target="_blank" class="btn btn-purple">Mobile</a>{% endif %}
        {% if special.phone_number %}<a href="tel:{{ special.phone_number }}" class="btn btn-orange">Call</a>{% endif %}
      </div>
      <p class="small text-muted mt-2">
        {% if special.start_date %}Starts {{ special.start_date }}{% endif %}
        {% if special.end_date %} Â· Ends {{ special.end_date }}{% endif %}
      </p>
    </div>
  </div>
</div>

<script>
  (function () {
    const emailForm = document.querySelector('#appertivo-email-form');
    if (emailForm) {
      emailForm.addEventListener('submit', function (e) {
        e.preventDefault();
        const email = document.querySelector('#appertivo-email-input')?.value || '';
        alert(`(Preview) Subscribed as: ${email}`);
      });
    }
  })();
</script>

