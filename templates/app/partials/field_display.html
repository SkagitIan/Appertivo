{# app/partials/field_display.html #}
{% load extras %}
{% if field == 'title' %}
  <div id="field-title-{{ special.id }}" class="d-flex align-items-start justify-content-between">
    <h3 class="h5 mb-1">{{ special.title|default:"(No title)" }}</h3>
    <button class="btn btn-link btn-sm"
            hx-get="{% url 'special_edit_field' special.id 'title' %}"
            hx-target="#field-title-{{ special.id }}"
            hx-swap="outerHTML">Edit</button>
  </div>
{% elif field == 'description' %}
  <div id="field-description-{{ special.id }}" class="mb-2">
    <p class="mb-2 text-secondary">{{ special.description|linebreaks|default:"(No description)" }}</p>
    <button class="btn btn-link btn-sm"
            hx-get="{% url 'special_edit_field' special.id 'description' %}"
            hx-target="#field-description-{{ special.id }}"
            hx-swap="outerHTML">Edit</button>
  </div>
{% elif field in 'order_url,mobile_order_url,phone_number' %}
  {# Re-render whole preview so CTA buttons reflect changes immediately #}
  {% include "app/partials/special_preview.html" with special=special %}
{% elif field in 'start_date,end_date' %}
  {# Re-render whole preview to show date text #}
  {% include "app/partials/special_preview.html" with special=special %}
{% else %}
  {# Fallback: re-render whole preview #}
  {% include "app/partials/special_preview.html" with special=special %}
{% endif %}
